{
    "patent_id": "US-11687424-B2",
    "title": "Automated media agent state management ",
    "assignee": "Commvault Systems, Inc.",
    "publication_date": "2023-06-27",
    "patent_link": "https://patents.google.com/patent/US11687424B2/en",
    "inventors": [
        "Shree Nandhini Santhakumar",
        "Mrityunjay UPADHYAY"
    ],
    "classifications": [
        "G06F3/061",
        "G06F11/2094",
        "G06F11/3055",
        "G06F11/3409",
        "G06F11/3485",
        "G06F3/0604",
        "G06F3/0634",
        "G06F3/0659",
        "G06F3/067",
        "G06N3/08",
        "G06F11/1451",
        "G06F11/1469",
        "G06F11/2023",
        "G06F11/2097",
        "G06F2201/80",
        "G06F2201/81",
        "G06F2201/815",
        "G06F2201/82",
        "G06F2201/84",
        "G06F2201/86",
        "G06N20/00",
        "G06N3/006"
    ],
    "abstract": "Described herein are techniques for automating media agent state management. For example, if a media agent is running poorly, then the media agent can be disabled and an alternate media agent can perform secondary copy job operations in place of the poorly running media agent. To determine whether a media agent is running poorly, a storage manager can determine whether the media agent has an anomalous number of failed jobs, pending jobs, and/or long running jobs and/or can determine whether the amount of resources used by the media agent is high or is increasing constantly, at a constant rate, or at a near constant rate.",
    "claims": "\n1. An information management system comprising:\na first secondary storage computing device comprising one or more hardware processors; and\none or more computing devices comprising one or more hardware processors, wherein the one or more computing devices are in communication with the first secondary storage computing device, and wherein the one or more computing devices are configured with computer-executable instructions that, when executed, cause the one or more computing devices to:\ndetermine that the first secondary storage computing device is allocated to a current job that comprises secondary copy operations;\ndetermine that the first secondary storage computing device is performing anomalously compared to one or more values measured for jobs previously allocated to the first secondary storage computing device over a period of time, wherein the one or more values correspond to one or more of: jobs running longer than expected, pending jobs, failed jobs, suspended jobs, killed jobs, and jobs successfully completed;\nbased on determining that the first secondary storage computing device is performing anomalously, identify an alternate secondary storage computing device, distinct from the first secondary storage computing device, wherein the alternate secondary storage computing device does not exceed one or more threshold values corresponding to one or more of: pending jobs, failed jobs, and jobs running longer than expected, that are allocated to the alternate secondary storage computing device; and\nbased on determining that the one or more threshold values are not exceeded at the alternate secondary storage computing device: route future jobs that comprise secondary copy operations to the alternate secondary storage computing device instead of to the first secondary storage computing device.\n2. The information management system of claim 1, wherein the computer-executable instructions, when executed, further cause the one or more computing devices to: place the first secondary storage computing device into a disabled state, based on determining that the first secondary storage computing device is performing anomalously, and while the first secondary storage computing device is in the disabled state, route the future jobs to the alternate secondary storage computing device instead of to the first secondary storage computing device.\n3. The information management system of claim 2, wherein the computer-executable instructions, when executed, further cause the one or more computing devices to: based on determining that services of the first secondary storage computing device were previously recycled within a threshold period of time, maintain the disabled state for the first secondary storage computing device.\n4. The information management system of claim 1, wherein the first secondary storage computing device is deviating from a trend that comprises the one or more values measured for the first secondary storage computing device over the period of time.\n5. The information management system of claim 1, wherein the one or more values measured for the first secondary storage computing device over the period of time comprise an expected trend, and wherein the first secondary storage computing device is performing anomalously by deviating from the expected trend.\n6. The information management system of claim 1, wherein the alternate secondary storage computing device is associated with the first secondary storage computing device based on a storage policy.\n7. The information management system of claim 1, wherein the computer-executable instructions, when executed, further cause the one or more computing devices to: based on determining that services of the first secondary storage computing device were previously recycled within a threshold period of time, continue to route the future jobs to the alternate secondary storage computing device instead of to the first secondary storage computing device.\n8. The information management system of claim 1, wherein determining that the first secondary storage computing device is performing anomalously is further based on a measure of usage of computing resources of the first secondary storage computing device exceeding a threshold value.\n9. The information management system of claim 1, wherein the computer-executable instructions, when executed, further cause the one or more computing devices to train a neural network that determines that the first secondary storage computing device is performing anomalously.\n10. The information management system of claim 1, wherein the computer-executable instructions, when executed, further cause the one or more computing devices to:\nobtain a list of alternate secondary storage computing devices that are associated with the first secondary storage computing device based on one or more storage policies;\nfor each alternate secondary storage computing device on the list, determine one or more values of one or more of: pending jobs, failed jobs, and jobs running longer than expected, that are allocated to the respective alternate secondary storage computing device on the list;\ndetermine that the alternate secondary storage computing device is healthy based on not exceeding the one or more threshold values; and\nbased on determining that the alternate secondary storage computing device is healthy, route the future jobs to the alternate secondary storage computing device instead of to the first secondary storage computing device.\n11. A data storage management system comprising:\na first secondary storage computing device comprising one or more hardware processors; and\none or more computing devices comprising one or more hardware processors, wherein the one or more computing devices are in communication with the first secondary storage computing device, and wherein the one or more computing devices are configured with computer-executable instructions that, when executed, cause the one or more computing devices to:\ndetermine that the first secondary storage computing device is performing anomalously, based on the first secondary storage computing device exceeding one or more expected values of at least one metric measured for jobs previously allocated to the first secondary storage computing device over a period of time, wherein the at least one metric measured one or more of: jobs running longer than expected, pending jobs, failed jobs, suspended jobs, killed jobs, and jobs successfully completed;\ndetermine that, among one or more alternate secondary storage computing devices in the data storage management system, an alternate secondary storage computing device is available to take over for the first secondary storage computing device;\ndetermine that the alternate secondary storage computing device does not exceed one or more threshold values corresponding to one or more of: pending jobs, failed jobs, and jobs running longer than expected, that are allocated to the alternate secondary storage computing device; and\nbased on determining that the one or more threshold values are not exceeded at the alternate secondary storage computing device: place the first secondary storage computing device into a disabled state, and while the first secondary storage computing device is in the disabled state, route future jobs that comprise secondary copy operations to the alternate secondary storage computing device instead of to the first secondary storage computing device.\n12. The data storage management system of claim 11, wherein the computer-executable instructions, when executed, further cause the one or more computing devices to:\nmonitor the jobs at the first secondary storage computing device to measure the at least one metric of the first secondary storage computing device; and\ndetermine the one or more expected values of the at least one metric.\n13. The data storage management system of claim 11, wherein the first secondary storage computing device is configured to execute a media agent, which performs the jobs at the first secondary storage computing device, and wherein the future jobs are routed to an alternate media agent that executes on the alternate secondary storage computing device.\n14. The data storage management system of claim 11, wherein the computer-executable instructions, when executed, further cause a storage manager among the one or more computing devices to: place the first secondary storage computing device into the disabled state, and while the first secondary storage computing device is in the disabled state, route the future jobs to the alternate secondary storage computing device instead of to the first secondary storage computing device.\n15. The data storage management system of claim 11, determining that the first secondary storage computing device is performing anomalously is based at least in part based on a time-series decomposition of jobs data associated with the first secondary storage computing device.\n16. The data storage management system of claim 11, wherein the computer-executable instructions, when executed, further cause the one or more computing devices to:\ndetermine a number of times that the first secondary storage computing device has been recycled within a threshold period of time;\nbased on determining that the number of times is below a threshold value, place the first secondary storage computing device into an enabled state, and while the first secondary storage computing device is in the enabled state, route future jobs that comprise secondary copy operations to the first secondary storage computing device instead of to the alternate secondary storage computing device; and\nbased on determining that the number of times is above the threshold value, continue to route the future jobs to the alternate secondary storage computing device instead of to the first secondary storage computing device.\n17. The data storage management system of claim 11, wherein at least one metric measured for jobs previously allocated to the first secondary storage computing device over the period of time comprise an expected trend, and wherein the first secondary storage computing device is performing anomalously by deviating from the expected trend.\n18. The data storage management system of claim 11, wherein the alternate secondary storage computing device is associated with the first secondary storage computing device based on a storage policy.\n19. The data storage management system of claim 11, wherein determining that the first secondary storage computing device is performing anomalously is further based on a measure of usage of computing resources of the first secondary storage computing device exceeding a threshold value.\n20. The data storage management system of claim 11, wherein the computer-executable instructions, when executed, further cause the one or more computing devices to:\nobtain a list of alternate secondary storage computing devices that are associated with the first secondary storage computing device based on one or more storage policies;\nfor each alternate secondary storage computing device on the list, determine one or more values of one or more of: pending jobs, failed jobs, and jobs running longer than expected, that are allocated to the respective alternate secondary storage computing device on the list;\ndetermine that the alternate secondary storage computing device is healthy based on not exceeding the one or more threshold values; and\nbased on determining that the alternate secondary storage computing device is healthy, route the future jobs to the alternate secondary storage computing device instead of to the first secondary storage computing device."
}