{
    "patent_id": "US-11740593-B2",
    "title": "Expert system for controlling local environment based on radiance map of sky ",
    "assignee": "Halio, Inc.",
    "publication_date": "2023-08-29",
    "patent_link": "https://patents.google.com/patent/US11740593B2/en",
    "inventors": [
        "Christian Humann"
    ],
    "classifications": [
        "G05B13/028",
        "F24F11/30",
        "F24F11/46",
        "F24F11/62",
        "F24F11/63",
        "G05B13/02",
        "G06N20/00",
        "G06N5/04",
        "F24F11/65",
        "F24F2110/00",
        "F24F2130/00",
        "F24F2130/10",
        "F24F2130/20",
        "G06N5/046"
    ],
    "abstract": "Disclosed is a system, method, and computer program product that employs high dynamic range (HDR) image processing and manipulation algorithms for capturing and measuring real-time sky conditions for processing into control input signals to a building's automated fenestration (AF) system, daylight harvesting (DH) system and HVAC system. The photometer comprises a color camera and a fitted fish-eye lens to capture 360-degree, hemispherical, low dynamic range (LDR) color images of the sky. Both camera and lens are housed in a sealed enclosure protecting them from environmental elements and conditions. In some embodiments the camera and processes are controlled and implemented by a back-end computer.",
    "claims": "\n1. An apparatus comprising:\na high dynamic range (HDR) capturer comprising one or more cameras to capture a plurality of low dynamic range (LDR) images of a sky, the HDR capturer to generate, using the plurality of LDR images, one or more HDR images of the sky; and\na processing device, communicatively coupled to the HDR capturer, the processing device to:\nprocess the one or more HDR images of the sky to obtain a radiance map of a 360-degree horizontal and vertical radiance map of the sky, wherein the radiance map comprises information about radiance associated with a region of the sky;\ndetermine, using the radiance map, a plurality of metrics characterizing a distribution of clouds in the sky;\nobtain, using the plurality of metrics, an estimate of a change of the distribution of clouds within a pre-determined period of time;\ngenerate, based on the estimate, settings for one or more environmental control systems (ECS) of a building; and\napply the settings to control the one or more ECS, wherein the one or more ECS comprise at least one of an automated fenestration system (AFS), an electric lighting system (ELS), or a heating, ventilation, and air conditioning (HVAC) system.\n2. The apparatus of claim 1, wherein the one or more HDR images of the sky comprise a first image of the sky at a first instance of time and a second HDR image of the sky at a second instance of time, and wherein the plurality of metrics comprises speed and direction of a cloud motion at each of a plurality of cloud locations.\n3. The apparatus of claim 1, wherein to generate the one or more HDR images of the sky, the processing device is to:\ndiscard a first LDR image whose average pixel brightness is below a threshold value; and\nprocess a second LDR image whose average pixel brightness is at or above the threshold value.\n4. The apparatus of claim 1, wherein to determine the plurality of metrics characterizing the distribution of clouds in the sky, the processing device is to:\ndetermine a red-to-blue signal ratio for a plurality of pixels of the one or more HDR images of the sky;\nidentify pixels having the red-to-blue signal ratio below a threshold value as pixels corresponding to a clear sky; and\nidentify pixels having the red-to-blue signal ratio above the threshold value as pixels corresponding to the clouds.\n5. The apparatus of claim 1, wherein to determine the plurality of metrics characterizing the distribution of clouds in the sky, the processing device is to:\nidentify a first set of pixels of the one or more HDR images of the sky as pixels corresponding to the clouds;\nidentify a second set of pixels of the one or more HDR images of the sky as pixels corresponding to a boundary between a clear sky and the clouds; and\ndetermine an edge-to-area ratio of a number of pixels in the second set of pixels to a number of pixels in the first set of pixels.\n6. The apparatus of claim 1, wherein the radiance map comprises a plurality of patches within a sky hemisphere.\n7. The apparatus of claim 1, wherein the generated settings are further based on a sun's path within the pre-determined period of time.\n8. The apparatus of claim 1, wherein the pre-determined period of time is associated with a time-lag of the one or more ECS of the building.\n9. The apparatus of claim 1, wherein the processing device is further to predict that a sun's occlusion within the pre-determined period of time is above a pre-set threshold value, and wherein the settings for the one or more ECS of the building comprises a setting for the AFS to keep shading systems open.\n10. The apparatus of claim 9, wherein the shading systems of the AFS comprise electrochromic glass, and wherein the setting for the AFS to keep the shading systems open comprises a setting that decreases a state of tint of the electrochromic glass.\n11. The apparatus of claim 1, wherein the processing device is further to predict that a sun's occlusion within the pre-determined period of time is below a pre-set threshold value, and wherein the settings for the one or more ECS of the building comprises a setting for the AFS placing the AFS in a pre-set glare control state.\n12. The apparatus of claim 11, wherein the AFS comprises electrochromic glass, and wherein the pre-set glare control state of the AFS comprises a pre-determined state of tint of the electrochromic glass.\n13. The apparatus of claim 1, wherein the one or more HDR images comprise a first set of images and a second set of HDR images, the second set of images being captured after a pre-determined time has elapses since the first set of HDR images was captured.\n14. The apparatus of claim 6, wherein the plurality of metrics characterizing the distribution of clouds in the sky is determined using a first subplurality of patches of the plurality of patches, the first subplurality of patches being within a part of the sky visible, through a first building fa\u00e7ade of the building, to an occupant of the building.\n15. A method comprising:\ncapturing, by one or more cameras of a high dynamic range (HDR) capturer, a plurality of low dynamic range (LDR) images of a sky;\ngenerating, by the HDR capturer, one or more HDR images of the sky, wherein the one or more HDR images of the sky are generated using the plurality of LDR images;\nprocessing, by a processing device communicatively coupled to the HDR capturer, the one or more images of the sky to obtain a radiance map of a 360-degree horizontal and vertical radiance map of the sky, wherein the radiance map comprises information about radiance associated with a region of the sky;\ndetermining, by the processing device, using the radiance map, a plurality of metrics characterizing a distribution of clouds in the sky;\nestimating, by the processing device, using the plurality of metrics, whether the distribution of clouds is to change within a pre-determined period of time;\ngenerating, by the processing device, based on the estimating, settings for one or more environmental control systems (ECS) of a building; and\napplying the settings to control the one or more ECS, wherein the one or more ECS comprise at least one of an automated fenestration system (AFS), an electric lighting system (ELS), or a heating, ventilation, and air conditioning (HVAC) system.\n16. The method of claim 15, wherein the one or more HDR images of the sky comprise a first HDR image of the sky at a first instance of time and a second HDR image of the sky at a second instance of time, and wherein the plurality of metrics comprises speed and direction of a cloud motion at each of a plurality of cloud locations.\n17. The method of claim 15, wherein generating the one or HDR more images of the sky comprises:\ndiscarding a first LDR image whose average pixel brightness is below a threshold value; and\nprocessing a second LDR image whose average pixel brightness is at or above the threshold value.\n18. The method of claim 15, wherein determining the plurality of metrics characterizing the distribution of clouds in the sky comprises:\ndetermining a red-to-blue signal ratio for a plurality of pixels of the one or more HDR images of the sky;\nidentifying pixels having the red-to-blue signal ratio below a threshold value as pixels corresponding to a clear sky; and\nidentifying pixels having the red-to-blue signal ratio above the threshold value as pixels corresponding to the clouds.\n19. A non-transitory machine-readable storage medium including instructions that, when accessed by a processing device, cause the processing device to:\ngenerate, using a plurality of LDR images of a sky captured by one or more cameras of an HDR capturer, one or more HDR images of the sky;\nprocess the one or more HDR images of a sky to obtain a radiance map of a 360-degree horizontal and vertical radiance map of the sky, wherein the radiance map comprises information about radiance associated with a region of the sky;\ndetermine, using the radiance map, a plurality of metrics characterizing a distribution of clouds in the sky;\nobtain, using the plurality of metrics, an estimate of a change of the distribution of clouds within a pre-determined period of time;\ngenerate, based on the estimate, settings for one or more environmental control systems (ECS) of a building; and\napply the settings to control the one or more ECS, wherein the one or more ECS comprise at least one of an automated fenestration system (AFS), an electric lighting system (ELS), or a heating, ventilation, and air conditioning (HVAC) system.",
    "status": "Active",
    "citations_own": [
        "US5572635A",
        "US5663621A",
        "US20040169770A1",
        "US6817399B2",
        "US20050110416A1",
        "US20070253768A1",
        "US20070291252A1",
        "US7417397B2",
        "US20090020233A1",
        "US20090222137A1",
        "US20090254222A1",
        "US20100116443A1",
        "US20100157427A1",
        "US20100198420A1",
        "CN101849435A",
        "US20100294440A1",
        "US20100309330A1",
        "US20110164304A1",
        "US20110220091A1",
        "WO2011129473A1",
        "WO2012005461A2",
        "CN102361328A",
        "US20120133315A1",
        "US20120143356A1",
        "US20120155704A1",
        "US20120201456A1",
        "US20120262600A1",
        "US20130054662A1",
        "US20130057937A1",
        "US20130063065A1",
        "US20130088463A1",
        "US8525462B2",
        "US20130258068A1",
        "US20140067733A1",
        "US20150116453A1",
        "US9137463B2"
    ],
    "citations_ftf": [],
    "citedby_own": [],
    "citedby_ftf": [
        "US10690540B2",
        "US10303035B2",
        "US10533892B2",
        "US20130271813A1",
        "US8213074B1",
        "US11314139B2",
        "US11592723B2",
        "US20120288217A1",
        "US8705162B2",
        "US9454055B2",
        "US9645465B2",
        "US9778532B2",
        "US9030725B2",
        "US9412290B2",
        "US10935865B2",
        "US11054792B2",
        "US11630367B2",
        "CN103987909B",
        "US11635666B2",
        "US11674843B2",
        "US10964320B2",
        "EP3223532B1",
        "US11300848B2",
        "US10503039B2",
        "US9638978B2",
        "US10048561B2",
        "US9406028B2",
        "US10215434B2",
        "US11719990B2",
        "US9772428B2",
        "US9885935B2",
        "US10221612B2",
        "CA2941526C",
        "US9786251B1",
        "US10313656B2",
        "US11205305B2",
        "US10234596B2",
        "US11781903B2",
        "TW202130977A",
        "US11566938B2",
        "US10088601B2",
        "US10425376B2",
        "US10288321B2",
        "FR3037133B1",
        "FR3038397B1",
        "TW202232213A",
        "US11255722B2",
        "AU2016346328B2",
        "US11482147B2",
        "US11454854B2",
        "US10609286B2",
        "EP3477946A1",
        "CN107942823A",
        "US11009389B2",
        "US11653101B2",
        "TW202206925A",
        "DE102020111590A1",
        "US11631493B2",
        "CN112507420B",
        "US20230154014A1",
        "CN114963472B"
    ]
}