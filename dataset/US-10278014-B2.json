{
    "patent_id": "US-10278014-B2",
    "title": "System and method for using geo-blocks and geo-fences to predict mobile device locations ",
    "assignee": "xAd, Inc.",
    "publication_date": "2019-04-30",
    "patent_link": "https://patents.google.com/patent/US10278014B2/en",
    "inventors": [
        "Can Liang",
        "Pravesh Katyal",
        "Guoxin Li",
        "Yilin Chen"
    ],
    "classifications": [
        "H04W4/021",
        "G06F15/18",
        "G06N20/00",
        "G06N20/20",
        "H04W4/029",
        "H04W4/185",
        "G06N3/006",
        "G06N3/084",
        "G06N5/01",
        "G06N5/025"
    ],
    "abstract": "A system coupled to a packet-based network is configured to predict the locations of mobile devices that have communicated with the packet-based network. The system includes a request processor configured to detect location events associated with mobile devices communicating with the packet-based network, each location event corresponding to a time stamp and identifying a geo-place in a geo database. The geo-places include geo-blocks and geo-fences. The system further comprises a location prediction subsystem configured to construct first feature space using first location events and second feature space using second location events, and to extract a set of labels from third location events. The location prediction subsystem is further configured to train a prediction model using the first feature space and the set of labels, and to apply the prediction model to the second feature space to obtain prediction results.",
    "claims": "\n1. A method performed by one or more computer systems coupled to a packet-based network to predict mobile devices locations, each of the one or more computer systems including at least one processor, the method comprising:\ndetecting, by one or more processors of the one or more computer systems, location events associated with mobile devices communicating with the packet-based network, each location event being associated with a mobile device and corresponding to a time stamp, the location events including geo-block-based location events and geo-fence-based location events, each geo-block-based location event being related to a geo-block in a geo-block database accessible by the one or more processors of the one or more computer systems, each geo-fence-based location event being related to a point of interest (POI) having a geo-fence in a geo-fence database accessible by the one or more processors of the one or more computer systems, the geo-block database storing therein data associated with a plurality of geo-blocks each corresponding to a geographical region having at least one border defined by a public road or natural boundary, the geo-fence database storing therein data associated with a plurality of geo-fences for a plurality of points of interest (POIs);\nconstructing, by one or more processors of the one or more computer systems, a first feature space using location events in a first time period, the first feature space including features related to at least some of the plurality of geo-blocks and features related to at least some of the plurality of POIs;\nextracting, by one or more processors of the one or more computer systems, a first set of labels related to one or more prediction locations from geo-fence-based location events in a first time frame after the first time period and;\ntraining, by a processor of the one or more computer systems running a machine learning program, a first prediction model using the first feature space and the first set of labels;\nconstructing, by a processor of the one or more computer systems, a second feature space using location events in a second time period, the second time period having a starting time after a starting time of the first time period, the second feature space including features related to at least some of the plurality of geo-blocks and features related to at least some of the plurality of points of interest; and\napplying, by a processor of the one or more computer systems, the first prediction model to the second feature space to obtain first prediction results, the first prediction results including a probability of each of a plurality of mobile devices to be at any of the one or more prediction locations during a second time frame after the second time period.\n2. The method of claim 1, wherein detecting the location events comprises:\nreceiving the requests from the packet-based network, each request including request data derived from signals transmitted by an associated mobile device, the request data including an identification of the associated mobile device, a time stamp and location data indicating a location of the associated mobile device;\ndetermining whether the location data triggers any of the plurality of geo-blocks;\ndetermining whether the location data triggers any of the plurality of geo-fences; and\ngenerating a request log including a plurality of entries, each entry of the plurality of entries corresponding to a respective request and including one or more location events and at least some of the request data in the respective request including the identification of the associated mobile device (UID) and the time stamp in the respective request, each of the one or more location events being related to a triggered geo-block or a triggered geo-fence.\n3. The method of claim 1, further comprising determining a relevance measure for each of the plurality of geo-blocks with respect to the location group and dividing the plurality of geo-blocks into a number of geo-block brackets each corresponding to a distinct range of relevance measures, wherein constructing the first feature space includes generating features related to each of the number of geo-block brackets.\n4. The method of claim 3, wherein constructing the first feature space includes determining, for each mobile device of a set of mobile devices, one or more most frequently visited geo-blocks, and generating a set of features related to each of the one or more most frequently visited geo-blocks for the each mobile device.\n5. The method of claim 3, constructing the first feature space further includes generating features related to each of a plurality of brands, each of the plurality of brands being associated with at least one of the plurality of POIs.\n6. The method of claim 3, further comprising identifying one or more retail geo-blocks among the plurality of geo-blocks, wherein constructing the first feature space includes generating features related to each of the one or more retail geo-blocks.\n7. The method of claim 3, wherein constructing the first feature space includes determining, for each mobile device of a set of mobile devices, a number of distinct POIs in which the each mobile device is located during the first time period.\n8. The method of claim 3, wherein constructing the first feature space includes determining, for each mobile device of a set of mobile devices, a number of distinct geo-blocks at which the each mobile device is located during the first time period.\n9. The method of claim 8, wherein constructing the first feature space includes determining, for each mobile device of the set of mobile devices, a number of visits made by a user of the each mobile device to any of the plurality of geo-blocks during the first time period.\n10. The method of claim 3, wherein the first feature space is further constructed using data derived from a feedback log, the feedback log including impression entries, each of the impression entries including identification of an associated mobile device, identification of an impressed document, and a time stamp, wherein constructing the first feature space includes determining, for each mobile device of a set of mobile devices, a number of times the each mobile device has been impressed with any of one or more documents associated with the location group during the first time period.\n11. The method of claim 10, wherein the feedback log further includes click/call entries, and secondary action entries, each of the click/call entries and the secondary action entries including identification of an associated mobile device, identification of an impressed document, and a time stamp, and wherein constructing the first feature space includes determining, for each mobile device of the set of mobile devices, a number of times clicks/calls have been made on the each mobile device during the first time period and a number of times secondary actions have been made using the each mobile device during the first time period.\n12. The method of claim 1, further comprising:\nextracting, by one or more processors of the one or more computer systems, one or more additional sets of labels related to the location group from geo-fence-based location events in respective ones of one or more additional time frames after the first time period, each of the one or more additional time frames being different from the first time frame and from any other time frame among the one or more additional time frames;\nconstructing, by one or more processors of the one or more computer systems, a third feature space using at least the first set of labels, the one or more additional sets of labels, and location events in a third time period, the third time period having a duration significantly shorter than the duration of the first time period and an end time before an end time of any of the first time frame and the one or more additional time frames;\nextracting, by one or more processors of the one or more computer systems, a second set of labels related to the location group from location events in a third time frame after the third time period, the third time frame having a duration significantly shorter than any of the first time frame and the one or more additional time frames; and\ntraining, by a processor of the one or more computer systems running a machine learning program, a second prediction model using the third feature space and the second set of labels.\n13. The method of claim 12, wherein constructing the third feature space includes determining, for each mobile device of a set of mobile devices, a most-recently triggered geo-block associated with a most recent geo-block-based location event in the third time period for the each mobile device and a set of features related to the most-recently triggered geo-block.\n14. The method of claim 13, wherein the set of features related to the most-recently triggered geo-block include a distance from the most-recently triggered geo-block to a closest location in the location group.\n15. The method of claim 12, wherein constructing the third feature space includes determining, for each mobile device of the set of mobile devices, a brand associated with a most recent geo-fence-based location event in the third time period for the each mobile device and a set of features related to the brand.\n16. The method of claim 12, further comprising:\ntraining, by a processor of the one or more computer systems running a machine learning routine, one or more additional prediction models using the first feature space and the one or more additional sets of labels; and\napplying, by a processor of the one or more computer systems, the one or more additional prediction models to the second feature space to obtain one or more additional sets of prediction results for the second plurality of mobile devices, the one or more additional sets of prediction results including a probability of each of the plurality of mobile devices to be at any of the one or more prediction locations during each one or more additional time frames after the second time period.\n17. The method of claim 16, further comprising:\nreceiving further requests;\ngenerating entries in a rolling database corresponding to the further requests;\nreceiving a request associated with a particular mobile device at a particular time;\nconstructing, by one or more processors of the one or more computer systems, a feature vector for the particular mobile devices using the first prediction results and the one or more additional sets of prediction results for the particular mobile device, and location events in entries in the rolling database associated with the particular mobile device in a fourth time period before the particular time; and\napplying the third prediction model to the feature vector to determine a probability of the particular mobile device to be at any of the one or more prediction locations during a fourth time frame after the fourth time period.\n18. A system coupled to a packet-based network for predicting mobile device locations, comprising:\na geo-block database storing therein data associated with a plurality of geo-blocks each corresponding to a geographical region having at least one border defined by a public road or natural boundary;\na geo-fence database storing therein data associated with a plurality of geo-fences corresponding to a plurality of points of interest;\na request processor configured to detect location events associated with mobile devices communicating with the packet-based network, each location event being associated with a mobile device and having a time stamp, the location events including geo-block-based location events and geo-fence-based location events, each geo-block-based location event being related to a geo-block in the geo-block database, each geo-fence-based location event being related to a brand of a point of interest having a geo-fence in the geo-fence databases;\na feature generator configured to construct a first feature space using location events in a first time period, and a second feature space using location events in a second time period, each of the first feature space and the second feature space including features related to at least some of the plurality of geo-blocks and features related to the or brands of at least some of the plurality of points of interest, the feature generator being further configured to extract a first set of labels related to a location group from geo-fence-based location events in a first time frame after the first time period;\na machine learning module configured to train a first prediction model for the location group using the first feature space and the first set of labels; and\nan off-line prediction module configured to apply the first prediction model to the second feature space to obtain first probabilities of respective ones of a plurality of mobile devices to be at any location in the location group during a second time frame after the second time period.\n19. The system of claim 18, wherein the feature generator is further configured to:\nextract a plurality of sets of labels related to the one or more prediction locations from location events in a first plurality of time frames, the plurality of sets of labels including the first set of labels and the first plurality of time frames including the first time frame;\nwherein the machine learning module is further configured to train a plurality of prediction models using the first feature space and the plurality of sets of labels, the plurality of prediction models include the first prediction model; and\nwherein the off-line prediction module is further configured to apply the plurality of prediction models to the second feature space to obtain a plurality of sets of prediction results, the plurality of sets of prediction results including a probability of each of the plurality of mobile devices to be at any of the one or more prediction locations during each of a second plurality of time frames after the second time period;\nwherein the feature generator is further configured to construct a third feature space using the plurality of sets of labels and location events in a third time period;\nwherein the feature generator is further configured to extract a second set of labels related to the one or more prediction locations from location events in a third time frame; and\nwherein the machine learning module is further configured to train an on-line prediction model using the third feature space and the second set of labels.\n20. The system of claim 19, further comprising an on-line prediction subsystem configured to:\nmaintain a rolling database of recently processed requests associated with mobile devices;\nconstruct, in response to a request associated with a particular mobile device received in real-time from the packet-based network, a set of features for the particular mobile device using prediction results associated with the particular mobile device in the plurality of sets of prediction results, and location events in processed requests associated with the particular mobile device in a fourth time period stored in the rolling database, the fourth time period being significantly shorter than the first or second time period and having an end time at or near a time of the request; and\napply the on-line prediction model to the set of features to generate on-line prediction results for the particular mobile device, the on-line prediction results including a probability of the particular mobile device being at any of the one or more prediction locations during a fourth time frame after the fourth time period, the fourth time frame being significantly shorter than any of the second plurality of time frames."
}