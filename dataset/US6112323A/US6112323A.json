{
    "patent_link": "https://patents.google.com/patent/US6112323A/en",
    "patent_id": "US6112323A",
    "title": "Method and computer program product for efficiently and reliably sending small data messages from a sending system to a large number of receiving systems",
    "abstract": "In a network with a sending system networked to at least one receiving system, it is sometimes desirable to transfer relatively short messages between the sending system and receiving systems in a highly reliable yet highly efficient manner. The present invention defines two short message protocols, one of which relies on a statistical model and the other of which uses positive acknowledgement to track receipt of transmitted packets by intended recipient. In the statistical reliability mode messages are divided into a guaranteed minimum number of packets, with additional packets being added if the message length is insufficient to fill the guaranteed minimum number of packets. The positive reliability mode of the present invention periodically sets an acknowledgement flag in the packets transmitted for a message. Receiving systems send an acknowledgement in response to receipt of that packet. The sending system tracks receipt of acknowledgements by intended recipient and retransmits any unacknowledged packets so as to positively assure the packets are received. Receiving systems send negative acknowledgements to request retransmission of missing packets. Negative acknowledgement suppression is implemented at both the sender and receiver to prevent a flood of negative acknowledgements from overwhelming the network. When packets are missed, the receiver selects a wait time that must elapse before the negative acknowledgement is sent. The wait time is selected according to a refined probability density function that results in relatively few negative acknowledgements being sent early on and relatively more negative acknowledgements being sent later on.",
    "inventors": [
        "Robert Steven Meizlik",
        "Keith S. Hamilton"
    ],
    "assignee": "Microsoft Technology Licensing LLC",
    "classifications": [
        "H04L1/1854",
        "H04L1/0002",
        "H04L1/0015",
        "H04L1/1678",
        "H04L1/1848",
        "H04L1/188",
        "H04L1/1887",
        "H04L12/1877",
        "H04L1/1685",
        "H04L12/1895",
        "H04L2001/0093"
    ],
    "claims": "\n1. In a network comprising a sending system networked together with at least one receiving system where data messages comprising a plurality of transmission packets are transmitted between the sending system and at least one receiving system, and where receiving systems that do not receive at least one transmission packet send negative acknowledgments to the sending system requesting retransmission of the missing transmission packets, a method for transmitting negative acknowledgments from the receiving systems to the sending system in a manner that does not create a flood of negative acknowledgments that can adversely affect the performance of the network, comprising the steps of:\nwaiting, at a receiving system, for a triggering event comprising at least one of either receipt of a transmission packet or expiration of a negative acknowledgment wait timer;\nupon the triggering event of receipt of a transmission packet, then performing at least the steps of:\nexamining the received transmission packet to determine if one or more previous transmission packets have been missed;\nif one or more previous transmission packets have been missed, then 1) selecting a negative acknowledgment wait time according to a defined probability density function that results in relatively few shorter wait times and relatively many longer wait times, and 2) setting a negative acknowledgment wait timer for the message associated with the transmission packet using the selected negative acknowledgment wait time; and upon the triggering event of expiration of a negative acknowledgment wait timer, then sending a negative acknowledgment to the sender system.\n2. A method for transmitting negative acknowledgments as recited in claim 1 wherein the defined probability density function is limited to a range between a minimum and maximum value.\n3. A method for transmitting negative acknowledgments as recited in claim 2 wherein the defined probability density function has a fairly sharp corner near the minimum value.\n4. A method for transmitting negative acknowledgments as recited in claim 1 wherein a low-end of the probability density function is adjusted based on network size so that as the network size increases, the overall number of receiving systems that select shorter wait times remains relatively constant.\n5. A method for transmitting negative acknowledgments as recited in claim 1 wherein the probability density function is selected so that it is highly probable that a very few systems will select a shorter negative acknowledgment wait time.\n6. A method for transmitting negative acknowledgments as recited in claim 1 wherein the probability density function is adjusted to increase the likelihood of selecting a shorter negative acknowledgment wait time as number of packets lost in the network increases.\n7. A method for transmitting negative acknowledgments as recited in claim 1 wherein the negative acknowledgment wait time is selected by performing at least the steps of:\ngenerating a pseudo-random number between a specified random number minimum value and a specified random number maximum value;\nmultiplying the pseudo-random number by a bias curve in order to generate an unscaled wait time with a probability density function that is dependent on the bias curve;\nscaling said unscaled wait time to create a scaled wait time by multiplying the unscaled wait time by a scale factor;\ngenerating a wait time that is above a minimum wait time by adding the minimum wait time to the scaled wait time if the scaled wait time is less than a minimum wait time, otherwise setting the wait time equal to the scaled wait time; and\ngenerating a selected wait time by reducing the wait time to a maximum wait time value if the wait time is above the maximum wait time value, otherwise setting the selected wait time equal to the wait time.\n8. A method for transmitting negative acknowledgments as recited in claim 7 wherein the scale factor is a function of the number of systems in the network.\n9. A method for transmitting negative acknowledgments as recited in claim 7 wherein the scale factor is a function of the packet loss rate of the network.\n10. A method for transmitting negative acknowledgments as recited in claim 7 wherein the bias curve has the form Y=Xn.\n11. In a network comprising a sending system networked together with at least one receiving system where data messages comprising a plurality of transmission packets are transmitted between the sending system and at least one receiving system, and where receiving systems that do not receive at least one transmission packet send negative acknowledgments to the sending system requesting retransmission of the missing transmission packets, a method for transmitting negative acknowledgments from the receiving systems to the sending system in a manner that does not create a flood of negative acknowledgments that can adversely affect the performance of the network, comprising the steps of:\nwaiting, at a receiving system, for a triggering event comprising at least one of either receipt of a transmission packet or expiration of a negative acknowledgment wait timer;\nupon the triggering event of receipt of a transmission packet, then checking the received transmission packet to determine if one or more previous packets have been missed, and if one or more previous packets have been missed then performing at least the steps of:\nselecting a negative acknowledgment wait time according to a defined probability density function that is adjusted based on both the number of systems in the network and the packet loss rate so that 1) the probability of selecting a relatively shorter wait time is reduced as the number of systems in the network increases in order to maintain a relatively constant number of negative acknowledgments from the receiving systems as the number of receiving systems increases, and 2) the probability of selecting a relatively shorter wait time is increased as the packet loss rate increases in order to increase the probability that a negative acknowledgment sent early will reach the sending system; and\nsetting a negative acknowledgment wait timer for the message associated with the transmission packet using the selected negative acknowledgment wait time; and\nupon the triggering event of expiration of a negative acknowledgment wait timer, then sending a negative acknowledgment to the sender system.\n12. A method for transmitting negative acknowledgments as recited in claim 11 wherein the defined probability density function is limited to a range between a minimum and maximum value.\n13. A method for transmitting negative acknowledgments as recited in claim 12 wherein the defined probability density function has a fairly sharp corner near the minimum value.\n14. A method for transmitting negative acknowledgments as recited in claim 13 wherein the probability density function is selected so that it is highly probable that a very few systems will select a shorter negative acknowledgment wait time.\n15. A method for transmitting negative acknowledgments as recited in claim 14 wherein the negative acknowledgment wait time is selected by performing at least the steps of:\ngenerating a pseudo-random number between a specified random number minimum value and a specified random number maximum value;\nmultiplying the pseudo-random number by a bias curve in order to generate an unscaled wait time with a probability density function that is dependent on the bias curve;\nscaling said unscaled wait time to create a scaled wait time by multiplying the unscaled wait time by a scale factor;\ngenerating a wait time that is above a minimum wait time by adding the minimum wait time to the scaled wait time if the scaled wait time is less than a minimum wait time, otherwise setting the wait time equal to the scaled wait time; and\ngenerating a selected wait time by reducing the wait time to a maximum wait time value if the wait time is above the maximum wait time value, otherwise setting the selected wait time equal to the wait time.\n16. A method for transmitting negative acknowledgments as recited in claim 15 wherein the bias curve has the form Y=Xn.\n17. A method for transmitting negative acknowledgments as recited in claim 16 wherein the scale factor is a function of the number of systems in the network.\n18. A method for transmitting negative acknowledgments as recited in claim 17 wherein the scale factor is a function of the packet loss rate of the network.\n19. In a network comprising a sending system networked together with at least one receiving system where data messages comprising a plurality of transmission packets are transmitted between the sending system and at least one receiving system, and where receiving systems that do not receive at least one transmission packet send negative acknowledgments to the sending system requesting retransmission of the missing transmission packets, a method for transmitting negative acknowledgments from the receiving systems to the sending system in a manner that does not create a flood of negative acknowledgments that can adversely affect the performance of the network, comprising the steps of:\nwaiting, at a receiving system, for a triggering event comprising at least one of either receipt of a transmission packet or expiration of a negative acknowledgment wait timer;\nupon the triggering event of receipt of a transmission packet, then checking the received transmission packet to determine if one or more previous packets have been missed, and if one or more previous packets have been missed then performing at least the steps of:\nselecting a negative acknowledgment wait time by performing at least the steps of:\ngenerating a pseudo-random number between a specified random number minimum value and a specified random number maximum value;\nmultiplying the pseudo-random number by a bias curve of the form Y=Xn in order to generate an unscaled wait time with a probability density function that is dependent on the bias curve;\nmeasuring a parameter that is indicative of the packet loss rate in the network and based on the parameter and the number of systems in the network, calculating a scale factor that is inversely proportional to the number of systems in the network and inversely proportional to the packet loss rate in the network;\nscaling said unscaled wait time to create a scaled wait time by multiplying the unscaled wait time by the scale factor;\ngenerating a wait time that is above a minimum wait time by adding the minimum wait time to the scaled wait time if the scaled wait time is less than a minimum wait time, otherwise setting the wait time equal to the scaled wait time; and\ngenerating a selected wait time by reducing the wait time to a maximum wait time value if the wait time is above the maximum wait time value, otherwise setting the selected wait time equal to the wait time; and\nsetting a negative acknowledgment wait timer for the message associated with the transmission packet using the selected wait time; and upon the triggering event of expiration of a negative acknowledgment wait timer, then sending a negative acknowledgment to the sender system.\n20. A computer readable medium having computer executable instructions carried thereon for use in a network comprising a sending system networked together with at least one receiving system, where messages are sent from said sending system to at least one receiving system using transmission packets designed to carry a designated quantity of data among a plurality of systems connected together in a network configuration, the computer executable instructions comprising:\nmeans for receiving individual packets of a message comprised of a guaranteed minimum number of individual transmission packets;\nmeans for storing received packets until the complete message can be reassembled in the proper order or until it is determined that the complete message will not be received;\nmeans for transmitting a request for packet retransmission if a packet in the message has not been received; and\nmeans for suppressing requests for retransmission of packets so that requests for retransmission from a plurality of receiving systems are not sent at the same time, said means for suppressing requests comprising means for selecting a wait time according to a defined probability density function, that is adjusted based on both the number of systems in the network and the packet loss rate so that 1) the probability of selecting a relatively shorter wait time is reduced as the number of systems in the network increases in order to maintain a relatively constant number of negative acknowledgments from the receiving systems as the number of receiving systems increases, and 2) the probability of selecting a relatively shorter wait time is increased as the packet loss rate increases in order to increase the probability that a negative acknowledgment sent early will reach the sending system.\n21. A computer readable medium as recited in claim 20 further comprising means for removing an incomplete message when it is determined that the message will not likely be received in its entirety.\n22. A computer readable medium as recited in claim 20 further comprising means for transferring a completely received message to the appropriate destination.\n23. A computer readable medium as recited in claim 20 further comprising means for transmitting an acknowledgement when a packet is received that has an acknowledgment request flag set.\n24. A computer readable medium having computer executable instructions carried thereon for use in a network comprising a sending system networked together with at least one receiving system, where messages are sent from said sending system to at least one receiving system using transmission packets designed to carry a designated quantity of data among a plurality of systems connected together in a network configuration, the computer readable medium comprising:\na receiver adapted to receive individual packets of the message and to place them in a message receive list for the message;\nsaid message receive list comprising a buffer to store individual packets of the message until the complete message can be reassembled in the proper order or until it is determined that the complete message will not be received;\na transmitter adapted to transmit a NAK requesting retransmission of at least one missed packet in the message; and\na NAK suppressor comprising a NAK wait timer and a wait time selector adapted to select a NAK wait time by executing at least the steps of:\ngenerating a pseudo-random number between a specified random number minimum value and a specified random number maximum value;\nmultiplying the pseudo-random number by a bias curve in order to generate an unscaled wait time with a probability density function that is dependent on the bias curve;\nmeasuring a parameter that is indicative of the packet loss rate in the network and based on the parameter and the number of systems in the network, calculating a scale factor that is inversely proportional to the number of systems in the network and inversely proportional to the packet loss rate in the network;\nscaling said unscaled wait time to create a scaled wait time by multiplying the unscaled wait time by the scale factor;\ngenerating a wait time that is above a minimum wait time by adding the minimum wait time to the scaled wait time if the scaled wait time is less than a minimum wait time, otherwise setting the wait time equal to the scaled wait time; and\ngenerating a NAK wait time by reducing the wait time to a maximum wait time value if the wait time is above the maximum wait time value, otherwise setting the NAK wait time equal to the wait time.\n25. A computer readable medium as recited in claim 24 wherein said bias curve has the form Y=Xn.",
    "status": "Expired - Lifetime",
    "citations_own": [
        "US3754211A",
        "US3824547A",
        "US5892759A"
    ],
    "citations_ftf": [
        "US5701427A"
    ],
    "citedby_own": [
        "US6317434B1",
        "US6367045B1",
        "US20020039349A1",
        "US6392993B1",
        "US20020078132A1",
        "US6430620B1",
        "US6442613B1",
        "WO2002069550A1",
        "US20020183051A1",
        "US20020180798A1",
        "US20020187835A1",
        "US6501763B1",
        "WO2003024036A1",
        "US6543014B1",
        "US6543005B1",
        "US20030088692A1",
        "US6581176B1",
        "EP1322058A1",
        "US20030126514A1",
        "WO2003083679A1",
        "US6633399B1",
        "US6633919B1",
        "US20030195946A1",
        "US20030225874A1",
        "US6681254B1",
        "US6693880B2",
        "US20040034822A1",
        "US6738923B1",
        "US20040117498A1",
        "US6778497B1",
        "US6859462B1",
        "US20050060608A1",
        "US20050165933A1",
        "US20050216910A1",
        "US20050234943A1",
        "US20050271071A1",
        "US7013418B1",
        "US7102998B1",
        "US20070106804A1",
        "US20070130601A1",
        "US20070242620A1",
        "US20070281726A1",
        "CN100388660C",
        "US7386600B1",
        "US20080154961A1",
        "US7409608B1",
        "US20080196006A1",
        "US20080209078A1",
        "US20080222234A1",
        "US20090083603A1",
        "US20090089440A1",
        "US20090210765A1",
        "US7590889B1",
        "US20090240816A1",
        "US20090319851A1",
        "US20100037270A1",
        "US7765281B1",
        "US7817631B1",
        "US7819316B2",
        "US7822829B2",
        "US7870189B2",
        "US7904344B2",
        "US7908467B2",
        "US7907966B1",
        "US7925780B2",
        "US7940706B2",
        "US7975022B2",
        "US7979576B2",
        "US8005985B2",
        "US20110314506A1",
        "US20120005352A1",
        "US20120128002A1",
        "US8191078B1",
        "US8301720B1",
        "US8301800B1",
        "US20120284757A1",
        "US8832580B2",
        "US8995630B1",
        "US9009234B2",
        "US20160013892A1",
        "US9288239B2",
        "WO2016100724A1",
        "US20190228617A1",
        "CN111770350A",
        "US11152110B2",
        "US11289183B2",
        "US11309070B2",
        "US11316609B2",
        "US11328804B2",
        "CN114928816A",
        "US11430305B2",
        "US20220279441A1",
        "US11437132B2",
        "US11470000B2",
        "US11501877B2",
        "US11571508B2",
        "US11574737B2",
        "US11587669B2",
        "US11626205B2",
        "US11628246B2",
        "US11628254B2",
        "US11654237B2",
        "US11763927B2"
    ],
    "citedby_ftf": [
        "WO2001030090A2",
        "MXPA02007857A",
        "WO2002017092A2",
        "US6744765B1",
        "US6807578B2",
        "JP2004535136A",
        "CN1586048B",
        "US8792512B2",
        "EP2184880A1",
        "CN107835069B",
        "CA2939003C",
        "US9876612B1"
    ]
}