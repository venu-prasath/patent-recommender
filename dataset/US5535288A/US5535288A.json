{
    "patent_link": "https://patents.google.com/patent/US5535288A/en",
    "patent_id": "US5535288A",
    "title": "System and method for cross correlation with application to video motion vector estimator",
    "abstract": "Method and apparatus for computing cross-correlations with application to image processing and video motion estimation, particularly in video compression applications, are described. Two-dimensional Fourier transform convolution techniques form a basis for novel techniques for performing two simultaneous two-dimensional cross correlations. The size of the input data blocks for the transformations are arbitrary. Apparatus for efficiently performing real-time cross correlations, including cross-correlations using Short Length Transforms (SLTs), using cascaded stages, multi-port memories, and multiple arithmetic units are also described. In video motion vector estimator application, data blocks within a current video frame are selected and converted to form a two-dimensional matrix of complex data. The complex matrix is transformed to the frequency domain to form the frequency domain representations of the selected data blocks. A set of search blocks within the previous video frame having a one-to-one correspondence with the selected data blocks, is then selected, converted into a complex data matrix, and transformed to the frequency domain to form the frequency domain representations of the selected search blocks. Once in the frequency domain, the sets of data corresponding to the data blocks and the search blocks are multiplied together and the product is inverse transformed to return to the spatial domain. The data then passes through an adjustment process to form the cross-correlations between the pairs of data blocks and search blocks.",
    "inventors": [
        "Chih-Kang Chen",
        "Jerome F. Duluk, Jr."
    ],
    "assignee": "Apple Inc",
    "classifications": [
        "G06F15/7857",
        "G06F17/15",
        "G06F17/153",
        "G06T7/231",
        "H04N19/42",
        "H04N19/43",
        "H04N19/51",
        "H04N19/61",
        "H04N5/145",
        "G06T2207/10016",
        "G06T2207/20056"
    ],
    "claims": "\n1. A data compression method for compressing first image data representing a first image signal and having a plurality of data blocks stored in a memory, each data block representing a portion of said first image data, the steps of the method comprising:\n(a) selecting first and second input data blocks from said plurality of data blocks in said first image;\n(b) converting the input data blocks to a complex data block by making the first data block a real part and the second data block an imaginary part of said complex data block;\n(c) transforming said complex data block to a complex frequency domain data block;\n(d) converting said complex frequency domain data block into a first frequency domain data block representing said first input data block and a second frequency domain data block representing said second input data block;\n(e) providing data representing a second image having a plurality of search blocks, and selecting first and second input search blocks from said data representing said second image, the input search blocks corresponding to a portion of said second image most likely to contain a best match to the input data blocks;\n(f) converting the input search blocks to a complex search block having real and imaginary pads by making the first search block the real pad and the second search block the imaginary pad of said complex search block;\n(g) transforming said complex search block to a complex first frequency domain search block;\n(h) converting said complex frequency domain search block to a first frequency domain search block representing said first input search block and a second frequency domain search block representing said second input search block;\n(i) multiplying the first frequency domain blocks to form a first resultant block and multiplying the second frequency domain blocks to form a second resultant block;\n(j) converting said resultant blocks into a complex resultant block;\n(k) inverse transforming the complex resultant block to a resultant spatial block having real and imaginary pads;\n(l) determining first and second cross-correlations between said input data blocks and said input search blocks by separating the real and imaginary pads of said resultant spatial block wherein said real part is the first cross-correlation between the first input data and search blocks and said imaginary pad is the second cross-correlation between the second input data and search blocks;\n(m) finding said best match for said first and second input data blocks from the cross-correlations calculated in step (l) based on predetermined criteria;\n(n) repeating steps (a) through (m) for other of said plurality of data blocks so as to generate a plurality of best matches;\n(o) generating a stream of compressed second image data representing a second image signal and corresponding to at least a portion of said first image signal and having substantially the same visual information content as said first image signal but representing said first image signal with less data than said first image data, said representation in accordance with said plurality of best matches; and\n(p) transmitting said generated stream of compressed second image data to a receiver.\n2. The method recited in claim 1, wherein steps (c) and (g) comprise performing at least one discrete fourier transform.\n3. The method recited in claim 1, further comprising the step for selecting the best cross-correlation from the cross-correlation calculated in step (l) by identifying the largest cross-correlation value.\n4. The method recited in claim 1, wherein steps (c) and (g) transform only a portion of the complex blocks where transform input data has non-zero values.\n5. The method recited in claim 1, wherein step (k) transforms only a portion of the complex resultant blocks where said complex resultant blocks have output data that not discarded.\n6. A data compression method for compressing first image data representing a first image signal having at least one data block representing a position of said first image data in a memory, the steps of the method comprising:\n(a) selecting an input data block from said at least one data block in said first image;\n(b) conveding the said input data block to a complex data block by making half of the said input data block a real part and the other half of the said input data block an imaginary part of said complex data block;\n(c) transforming said complex data block to a frequency domain data block representing said input data block;\n(d) providing data representing a second image having a plurality of search blocks, and selecting an input search block from said data representing said second image, the input search block corresponding to a portion of said second image most likely to contain the best match to the input data block;\n(e) converting the input search block to a complex search block having real and imaginary parts by making half of the input search block the real part and the other half of the input search block the imaginary part of said complex data block;\n(f) transforming said complex search block to a frequency domain search block representing input search block;\n(g) multiplying the frequency domain blocks to form a resultant block;\n(h) inverse transforming said resultant block to a resultant spatial block;\n(i) determining cross-correlations between said input data block and said input search block from said resultant spatial block; and\n(j) repeating steps (a) through (i) for others of said at least one data block so as to generate a plurality of cross-correlations;\n(k) generating a stream of compressed second image data representing a second image signal and corresponding to at least a portion of said first image .signal and having substantially the same visual information content as said first image signal but representing said first image signal with less data than said first image data, said representation in accordance with said plurality of cross-correlations; and\n(l) transmitting said generated stream Of compressed second image data to a receiver.\n7. The method recited in claim 6, wherein steps (c) and (f) comprise performing at least one discrete fourier transform.\n8. The method recited in claim 6, further comprising the step of selecting the best cross-correlation from the cross-correlations calculated in step (i) based on predetermined criteria.\n9. The method recited in claim 6, wherein steps (c) and (g) transform only a portion of the complex blocks where transform input data has non-zero values.\n10. The method recited in claim 6, wherein step (k) transforms only a portion of the resultant blocks where said resultant blocks have output data that is not discarded.\n11. A device for compressing data representing data frames of an image having a plurality of data blocks, each data block being made of a portion of a first data frame, said device comprising:\na frame memory for storing at least portions of a second data frame;\na motion estimator, including:\na data controller for selecting first and second input data blocks from said plurality of data blocks in said first data frame, and for selecting from said frame memory, first and second input search blocks from said second data frame, said input search blocks corresponding to a portion of said second data frame most likely to contain the best cross-correlation to said input data blocks;\na plurality of data processor means operable in parallel to perform data processing operations including operations on said data and search blocks under program control, said plurality of processors including:\nprocessor means for converting the input data blocks to a complex data block having real and imaginary parts by making the first data block the real part and the second data block the imaginary part of said complex data block;\nprocessor means for transforming said complex data block to a first frequency domain data block representing said first input data block and a second frequency domain data block representing said second input data block;\nprocessor means for converting the input search blocks to a complex search block having real and imaginary parts by making the first search block the real part and the second search block the imaginary part of said complex search block;\nprocessor means for transforming said complex search block to a first frequency domain search block representing said first input search block and a second frequency domain search block representing said second input search block;\nprocessor means for multiplying the first frequency domain blocks to form a first resultant block and multiplying the second frequency domain blocks to form a second resultant block;\nprocessor means for inverse transforming the result blocks to a resultant spatial block having real and imaginary parts; and\nprocessor means for determining first and second cross-correlations between said input data blocks and said input search blocks by separating the real and imaginary parts of said resultant spatial block wherein said real part is the first cross-correlation between the first input data and search blocks and said imaginary part is the second cross-correlation between the second cross-correlation between the second input data and search blocks;\nmeans, coupled to said motion estimator, for generating a stream of compressed data representing at least a portion of said first data frame based on said first and second cross-correlations; and\na transmitter that transmits said stream of compressed data.\n12. A device for compressing data representing a data frame having at least one data block, said device comprising:\na frame memory for storing at least portions of said first data frame and said second data frame;\na motion vector estimator, including:\na data controller for selecting at least one input data block from said at least one data block in said first data frame and for selecting from said frame memory at least one input search block from said second data frame, the input search blocks corresponding to a portion of a second data frame most likely to contain the best cross-correlation to the input data blocks;\na plurality of data processor means operable in parallel to perform data processing operations including Operations on said data and search blocks under program control, said plurality of processors including:\nprocessor means for converting the input data blocks to a complex data block;\nprocessor means for transforming said complex data block to a frequency domain data block representing said input data blocks;\nprocessor means for converting the input search blocks to a complex search block;\nprocessor means for transforming said complex search block to a frequency domain search block representing said input search blocks;\nprocessor means for multiplying the frequency domain blocks to form a resultant block;\nprocessor means for inverse transforming said resultant block to a resultant spatial block; and\nprocessor means for determining cross-correlations between said input data block and said input search block from said resultant spatial block;\nmeans, coupled to said motion vector estimator, for generating a stream of compressed data representing at least a portion of said first data frame based on said cross-correlations; and\na transmitter that transmits said stream of compressed data.\n13. The device recited in claim 12, wherein:\nsaid data controller selects only one input data block in said first data frame and selects only one input search block from said second data frame;\nsaid plurality of data processor means converts said input data block to a complex data block having real and imaginary pads by making a first portion of the input data block the real part and a second portion of data block the imaginary part of said complex data block; and\nsaid plurality of data processor means converts said input search block to a complex search block having real and imaginary parts by making a first portion of the input search block the real part and a second portion of the input search block the imaginary part of said complex search block.\n14. The device recited in claim 13, wherein:\nsaid first portion of the input data block is one-half of the input data block;\nsaid second portion of the input data block is the other half of the input data block;\nsaid first portion of the input search block is one-half of the input search block; and\nsaid second portion of the input search block is the other half of the input search block.\n15. A device for compressing data representing a data frame having at least one data block, comprising:\na frame memory for storing at least portions of said first data frame and said second data frame;\na motion vector estimator, including:\na data controller for selecting at least one input data block from said at least one data block in said first data frame and for selecting from said frame memory at least one input search block from said second data frame, the input search blocks corresponding to a portion of a second data frame most likely to contain the best cross-correlation to the input data blocks;\nfirst data processing apparatus that under program control perform data processing operations, said first data processing apparatus including:\nprocessor means for converting the input data blocks to a complex data block;\nprocessor means for transforming said complex data block to a frequency domain data block representing said input data blocks;\nprocessor means .for converting the input search blocks to a complex search block;\nprocessor means for transforming said complex search block to a frequency domain search block representing said input search blocks;\nprocessor means for multiplying the frequency domain blocks to form a resultant block;\nprocessor means for inverse transforming said resultant block to a resultant spatial block; and\nprocessor means for determining cross-correlations between said input data block and said input search block from said resultant spatial block; and\nsecond data processing apparatus, coupled to said motion vector estimator, for generating a stream of compressed data representing at least a portion of said first data frame based on said cross-correlations; and\na transmitter that transmits said stream of compressed data.\n16. A device for compressing data representing a data frame having at least one data block, comprising:\na frame memory for storing at least portions of said first data frame and said second data frame;\ndata processing apparatus coupled to said frame memory and programmed to perform data processing operations;\na motion vector estimator, including:\na data controller for selecting at least one input data block from said at least one data block in said first data frame and for selecting from said frame memory at least one input search block from said second data frame, the input search blocks corresponding to a portion of a second data frame most likely to contain the best cross-correlation to the input data blocks;\nsaid data processing apparatus including:\nprocessor means for converting the input data blocks to a complex data block;\nprocessor means for transforming said complex data block to a frequency domain data block representing said input data blocks;\nprocessor means for converting the input search blocks to a complex search block;\nprocessor means for transforming said complex search block to a frequency domain search block representing said input search blocks;\nprocessor means for multiplying the frequency domain blocks to form a resultant block;\nprocessor means for inverse transforming said resultant block to a resultant spatial block; and\nprocessor means for determining cross-correlations between said input data block and said input search block from said resultant spatial block;\nsaid data processing apparatus being coupled to said motion vector estimator and programmed to generate a stream of compressed data representing at least a portion of said first data frame based on said cross-correlations; and\na transmitter that transmits said stream of compressed data.",
    "status": "Expired - Lifetime",
    "citations_own": [
        "US4115865A",
        "US4449193A",
        "US4581760A",
        "US4669054A",
        "US4695973A",
        "US4998286A",
        "US5031038A",
        "US5040223A",
        "US5050220A",
        "US5054090A",
        "US5067162A",
        "US5189712A",
        "US5247586A"
    ],
    "citations_ftf": [],
    "citedby_own": [
        "US5764787A",
        "US5793985A",
        "US5812197A",
        "US5870500A",
        "US5889890A",
        "US5917964A",
        "EP0929194A2",
        "US5953458A",
        "US5973754A",
        "US5991443A",
        "US6009437A",
        "WO2000002388A1",
        "US6058210A",
        "US6057892A",
        "US6370623B1",
        "US6430316B1",
        "US20020136459A1",
        "US6463164B1",
        "US6532013B1",
        "WO2003021966A1",
        "US6664963B1",
        "US20040022319A1",
        "US6690372B2",
        "US6697064B1",
        "US6704025B1",
        "US6734861B1",
        "US20040130552A1",
        "US20040141554A1",
        "US20040156547A1",
        "US6778181B1",
        "US6844880B1",
        "US6870540B1",
        "US20050169543A1",
        "US20050237337A1",
        "US20050259103A1",
        "US20060018562A1",
        "US7006101B1",
        "US7009605B2",
        "US7009615B1",
        "US7023437B1",
        "US7061502B1",
        "US20060197509A1",
        "US20060290677A1",
        "US7162716B2",
        "US7164426B1",
        "US7170513B1",
        "US20070076378A1",
        "US7209140B1",
        "US20070114968A1",
        "US20070160144A1",
        "EP1879400A1",
        "US20080123748A1",
        "US20080226192A1",
        "US20080260265A1",
        "US7456838B1",
        "US7577930B2",
        "US7599044B2",
        "US20110255654A1",
        "US9357162B2",
        "US9582726B2",
        "US10869108B1",
        "US11632489B2"
    ],
    "citedby_ftf": [
        "GB9325914D0",
        "US5838831A",
        "ATE492982T1",
        "US7519115B2",
        "US20050080576A1"
    ]
}